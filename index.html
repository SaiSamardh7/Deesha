<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Deesha — Trip Setup</title>

<style>
  :root{
    --brandA:#123f8c;
    --brandB:#1e5bb8;
    --muted:#6b7a8a;
    --shadow: 0 18px 46px rgba(0,0,0,.14);
    --cardShadow: 0 18px 34px rgba(0,0,0,.10);
    --stroke: rgba(185,205,230,.9);
  }

  *{ box-sizing:border-box; }
  html, body { height:100%; }

  body{
    margin:0;
    min-height:100vh;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    display:flex;
    align-items:center;
    justify-content:center;
    padding: clamp(12px, 3vw, 28px);
    background: radial-gradient(1200px 700px at 50% 35%, rgba(210,240,255,0.95), #f6fbff 60%, #f6fbff);
  }

  /* Outer container: Stage 1 centered */
  .shell{
    width: min(980px, 95vw);
    padding: clamp(20px, 3.4vw, 36px);
    border-radius: 28px;
    background: linear-gradient(180deg, rgba(210,240,255,0.75), rgba(255,255,255,0.55));
    box-shadow: var(--shadow);
    border: 1px solid rgba(160, 200, 235, 0.35);

    display:flex;
    align-items:center;
    justify-content:center;

    height: auto;
    min-height: unset;

    overflow: visible;

    transition: width 0.6s ease, padding 0.6s ease, box-shadow 0.6s ease, background 0.6s ease;
  }

  /* Stage 2 layout */
  .shell.stage2{
    width: min(1280px, 96vw);
    display:flex;
    align-items:flex-start;
    justify-content:center;
    gap: 28px;
    padding: clamp(16px, 2.6vw, 24px);
  }

  /* Stage 3 layout */
  .shell.stage3{
    width: min(1280px, 96vw);
    display:flex;
    align-items:flex-start;
    justify-content:center;
    gap: 28px;
    padding: clamp(16px, 2.6vw, 24px);
  }

  /* Stage 1 card */
  .card{
    width: 640px;
    flex: 0 0 auto;
    border-radius: 26px;
    background: rgba(255,255,255,0.92);
    border: 1px solid rgba(190, 215, 240, 0.75);
    box-shadow: var(--cardShadow);
    padding: 26px;
    transition: width 0.6s ease, transform 0.6s ease;
  }

  /* When Stage 2/3 opens, keep Stage 1 still readable */
  .shell.stage2 .card,
  .shell.stage3 .card{
    width: 600px;
    align-self: flex-start;
  }

  .header{
    display:flex;
    align-items:center;
    gap:12px;
    margin-bottom: 18px;
  }

  .logoBox{
    width:46px;height:46px;
    border-radius:14px;
    background:#fff;
    border:1px solid rgba(190,215,240,.9);
    display:flex;
    align-items:center;
    justify-content:center;
    overflow:hidden;
    flex: 0 0 auto;
  }

  .logoBox img{
    width:34px;height:34px;
    object-fit:contain;
    display:block;
  }

  .brand{
    font-size:32px;
    font-weight:900;
    color:var(--brandA);
    line-height: 1.05;
  }

  .stage{
    font-size:14px;
    font-weight:700;
    color:var(--muted);
    margin-top: 2px;
  }

  .inner{
    margin-top:10px;
    border-radius:22px;
    background:rgba(255,255,255,.96);
    border:1px solid rgba(190,215,240,.75);
    padding:22px;
  }

  .row{
    display:grid;
    grid-template-columns: 170px 1fr;
    gap:14px;
    padding:12px 0;
    align-items:center;
  }

  .label{
    font-size:20px;
    font-weight:800;
    color:#7a8a9a;
  }

  input, select{
    height:50px;
    width:100%;
    border-radius:18px;
    border:1px solid var(--stroke);
    padding:10px 14px;
    font-size:17px;
    outline:none;
    min-width: 0;
    background:#fff;
    color:#0b1220;
  }

  input:focus, select:focus{
    border-color: rgba(30, 91, 184, 0.65);
    box-shadow: 0 0 0 5px rgba(30, 91, 184, 0.12);
  }

  /* Counter */
  .counter{
    width: 150px;
    height: 40px;
    border-radius: 14px;
    display:grid;
    grid-template-columns:40px 1fr 40px;
    overflow:hidden;
    border:1px solid var(--stroke);
    background:#fff;
  }
  .counter button{
    border:0;
    font-size:18px;
    font-weight:900;
    color:var(--brandA);
    background:rgba(207,239,255,.75);
    cursor:pointer;
  }
  .counter button:hover{ background: rgba(207,239,255,0.95); }
  .counter .mid{
    display:flex;
    align-items:center;
    justify-content:center;
    font-weight:900;
    font-size:16px;
    color:#0b1220;
    background:#fff;
  }

  /* Mini headings for Adults/Kids */
  .groupBlock{
    display:flex;
    flex-direction:column;
    gap:6px;
    min-width:150px;
  }
  .groupMiniLabel{
    font-size:13px;
    font-weight:900;
    color:#7a8a9a;
    padding-left:6px;
  }

  /* Group size pill (Stage 3 summary) */
  .groupPill{
    display:inline-flex;
    align-items:center;
    height:50px;
    padding:0 16px;
    border-radius:999px;
    border:1px solid var(--stroke);
    background:#fff;
    font-weight:900;
    color:#0b1220;
    width: fit-content;
  }

  /* Continue */
  .cta{
    height:54px;
    padding:0 18px;
    border-radius:18px;
    border:0;
    font-size:18px;
    font-weight:900;
    color:#fff;
    cursor:pointer;
    background:linear-gradient(135deg,var(--brandA),var(--brandB));
    box-shadow:0 14px 22px rgba(18,63,140,.22);
    width: 100%;
    margin-top: 18px;
  }
  .cta:hover{ filter: brightness(1.03); }
  .cta:active{ transform: translateY(1px); }

  /* Hide Continue when Stage 2 or 3 is open */
  .shell.stage2 #continueBtn,
  .shell.stage3 #continueBtn{ display:none; }

  /* Stage 2 */
  .stage2-panel{
    flex: 0 0 auto;
    display: none;
    opacity: 0;
    transform: translateX(18px);
    pointer-events: none;
    transition: opacity 0.35s ease, transform 0.6s ease;
  }
  .shell.stage2 .stage2-panel{
    display: block;
    opacity: 1;
    transform: translateX(0);
    pointer-events: auto;
    width: 420px;
  }
  /* Hide stage2 panel on stage3 */
  .shell.stage3 .stage2-panel{ display:none; }

  .panelCard{
    border-radius:26px;
    background:rgba(255,255,255,.92);
    border:1px solid rgba(190,215,240,.75);
    box-shadow:var(--cardShadow);
    padding:26px;
  }

  .panelTitle{
    font-size:22px;
    font-weight:900;
    color:var(--brandA);
    margin:0 0 12px;
  }

  .chips{
    display:flex;
    flex-wrap:wrap;
    gap:12px;
  }

  .chip{
    padding:12px 14px;
    border-radius:999px;
    border:1px solid var(--stroke);
    background:#fff;
    cursor:pointer;
    user-select:none;
    display:inline-flex;
    align-items:baseline;
    gap:8px;
    color:#0b1220;
    transition: transform 0.05s ease, background 0.15s ease, border-color 0.15s ease;
    white-space: nowrap;
  }

  .chip:hover{ background: rgba(207,239,255,.60); transform: translateY(-1px); }

  .chipMain{
    font-weight:900;
    font-size:16px;
    color:#0b1220;
  }

  .chipSub{
    font-weight:700;
    font-size:13px;
    color: rgba(11,18,32,0.62);
  }

  .chip.on{
    background: rgba(207,239,255,.95);
    border-color: rgba(30,91,184,.55);
  }

  /* Actions */
  .panelActions{
    margin-top:18px;
    display:flex;
    justify-content:flex-end;
    gap:12px;
    align-items:center;
  }

  .panelNext{
    height:54px;
    padding:0 18px;
    border-radius:18px;
    border:0;
    font-size:18px;
    font-weight:900;
    color:#fff;
    cursor:pointer;
    background:linear-gradient(135deg,var(--brandA),var(--brandB));
    box-shadow:0 14px 22px rgba(18,63,140,.22);
    min-width: 160px;
  }

  /* Stage 3 */
  .stage3-panel{
    flex:0 0 auto;
    display:none;
    opacity:0;
    transform:translateX(18px);
    pointer-events:none;
    transition:opacity .35s ease, transform .6s ease;
  }
  .shell.stage3 .stage3-panel{
    display:block;
    opacity:1;
    transform:translateX(0);
    pointer-events:auto;
    width:420px;
  }

  .constraint{ margin-bottom:16px; }
  .constraintLabel{
    font-weight:900;
    color:var(--brandA);
    margin-bottom:8px;
  }
  .seg{ display:flex; gap:8px; }
  .seg button{
    flex:1;
    padding:10px 0;
    border-radius:999px;
    border:1px solid var(--stroke);
    background:#fff;
    font-weight:900;
    cursor:pointer;
  }
  .seg button.on{
    background:rgba(207,239,255,.95);
    border-color:rgba(30,91,184,.55);
  }

  /* Stage 3 left-card: show summary like the image */
  .groupRowSummary{ display:none; }
  .prefSummaryWrap{ display:none; margin-top: 14px; }

  .shell.stage3 .groupRowEdit{ display:none; }
  .shell.stage3 .groupRowSummary{ display:grid; }
  .shell.stage3 .prefSummaryWrap{ display:block; }

  .prefSummaryTitle{
    font-size:14px;
    font-weight:900;
    color:var(--brandA);
    margin: 4px 0 10px;
  }

  .prefSummary{
    display:flex;
    flex-wrap:wrap;
    gap:12px;
  }

  /* summary chips: keep the look but not clickable */
  .prefSummary .chip{
    cursor:default;
    pointer-events:none;
  }
  .prefSummary .chip:hover{
    background:#fff;
    transform:none;
  }

  @media (max-width: 860px){
    .shell.stage2, .shell.stage3{ flex-direction: column; align-items: center; }
    .shell.stage2 .card, .shell.stage3 .card{ width: 100%; }
    .shell.stage2 .stage2-panel, .shell.stage3 .stage3-panel{ width: 100%; }
    .row{ grid-template-columns: 1fr; }
    .counter{ width: 100%; }
    .groupBlock{ min-width: 0; }
  }
</style>
</head>

<body>
  <div class="shell" id="shell">

    <!-- Left card (Trip overview / inputs) -->
    <div class="card">
      <div class="header">
        <div class="logoBox">
          <img src="assets/logo.jpg" alt="Deesha logo">
        </div>
        <div>
          <div class="brand">Deesha</div>
          <div class="stage">Plan your perfect trip</div>
        </div>
      </div>

      <div class="inner">
        <div class="row">
          <div class="label">Start</div>
          <input id="start" placeholder="e.g., dallas, tx">
        </div>

        <div class="row">
          <div class="label">Destination</div>
          <input id="dest" placeholder="e.g., austin, tx">
        </div>

        <div class="row">
          <div class="label">Travel Mode</div>
          <select id="mode">
            <option value="Car" selected>Car</option>
            <option value="Flight + car">Flight + car</option>
          </select>
        </div>

        <div class="row">
          <div class="label">Number of Days</div>
          <div class="counter" aria-label="Number of days">
            <button type="button" id="minus">−</button>
            <div class="mid" id="days">1</div>
            <button type="button" id="plus">+</button>
          </div>
        </div>

        <!-- Group size (edit in Stage 1/2) -->
        <div class="row groupRowEdit">
          <div class="label">Group size</div>

          <div style="display:flex; gap:12px; flex-wrap:wrap; align-items:flex-end;">
            <div class="groupBlock">
              <div class="groupMiniLabel">Adults</div>
              <div class="counter" aria-label="Adults">
                <button type="button" id="adultsMinus">−</button>
                <div class="mid" id="adultsCount">1</div>
                <button type="button" id="adultsPlus">+</button>
              </div>
            </div>

            <div class="groupBlock">
              <div class="groupMiniLabel">Kids</div>
              <div class="counter" aria-label="Kids">
                <button type="button" id="kidsMinus">−</button>
                <div class="mid" id="kidsCount">0</div>
                <button type="button" id="kidsPlus">+</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Group size (summary pill in Stage 3) -->
        <div class="row groupRowSummary">
          <div class="label">Group size</div>
          <div class="groupPill" id="groupPill">Adults 1, Kids 0</div>
        </div>

        <!-- Selected preferences summary (Stage 3 only) -->
        <div class="prefSummaryWrap" id="prefSummaryWrap">
          <div class="prefSummaryTitle">Selected preferences</div>
          <div class="prefSummary" id="selectedPrefs"></div>
        </div>

        <button class="cta" id="continueBtn" type="button">Continue →</button>
      </div>
    </div>

    <!-- Stage 2: Preferences -->
    <div class="stage2-panel" id="stage2Panel" aria-hidden="true">
      <div class="panelCard">
        <div class="panelTitle">Preferences</div>

        <div class="chips" id="chips">
          <div class="chip" data-key="adventure"><span class="chipMain">Adventure</span> <span class="chipSub">(zipline/ATV/rafting)</span></div>
          <div class="chip" data-key="hiking"><span class="chipMain">Hiking</span> <span class="chipSub">(easy/moderate/hard)</span></div>
          <div class="chip" data-key="scenic"><span class="chipMain">Scenic views</span> <span class="chipSub">(sunrise/sunset)</span></div>
          <div class="chip" data-key="hidden"><span class="chipMain">Hidden gems</span> <span class="chipSub">(offbeat)</span></div>
          <div class="chip" data-key="food"><span class="chipMain">Food</span> <span class="chipSub">(must-try/cafes)</span></div>
          <div class="chip" data-key="nature"><span class="chipMain">Nature</span> <span class="chipSub">(lakes/waterfalls/deserts)</span></div>
          <div class="chip" data-key="photo"><span class="chipMain">Photography spots</span></div>
          <div class="chip" data-key="nightlife"><span class="chipMain">Nightlife / events</span></div>
          <div class="chip" data-key="relax"><span class="chipMain">Relax</span> <span class="chipSub">(spas/beaches)</span></div>
        </div>

        <div class="panelActions">
          <button class="panelNext" id="nextBtn" type="button">Next →</button>
        </div>
      </div>
    </div>

    <!-- Stage 3: Constraints -->
    <div class="stage3-panel" id="stage3Panel" aria-hidden="true">
      <div class="panelCard">
        <div class="panelTitle">Constraints</div>

        <div class="constraint">
          <div class="constraintLabel">Budget</div>
          <div class="seg" data-key="budget">
            <button data-val="low">LOW</button>
            <button data-val="mid" class="on">MID</button>
            <button data-val="high">HIGH</button>
          </div>
        </div>

        <div class="constraint">
          <div class="constraintLabel">Fitness level (for hikes)</div>
          <div class="seg" data-key="fitness">
            <button data-val="easy" class="on">EASY</button>
            <button data-val="moderate">MODERATE</button>
            <button data-val="hard">HARD</button>
          </div>
        </div>

        <div class="constraint">
          <div class="constraintLabel">Food preference</div>
          <div class="seg" data-key="foodPref">
            <button data-val="halal">HALAL</button>
            <button data-val="veg" class="on">VEG</button>
            <button data-val="nonveg">NON-VEG</button>
          </div>
        </div>

        <div class="constraint">
          <div class="constraintLabel">Alcohol</div>
          <div class="seg" data-key="alcohol">
            <button data-val="no" class="on">NO</button>
            <button data-val="yes">YES</button>
          </div>
        </div>

        <div class="constraint">
          <div class="constraintLabel">Tolls</div>
          <div class="seg" data-key="tolls">
            <button data-val="avoid" class="on">AVOID</button>
            <button data-val="add">ADD</button>
          </div>
        </div>

        <div class="constraint">
          <div class="constraintLabel">Adventure level</div>
          <div class="seg" data-key="adventureLevel">
            <button data-val="chill">CHILL</button>
            <button data-val="balanced" class="on">BALANCED</button>
            <button data-val="extreme">EXTREME</button>
          </div>
        </div>

        <div class="constraint">
          <div class="constraintLabel">Pet friendly</div>
          <div class="seg" data-key="petFriendly">
            <button data-val="yes">YES</button>
            <button data-val="no" class="on">NO</button>
          </div>
        </div>

        <div class="panelActions">
          <button class="panelNext" id="buildBtn" type="button">Build itinerary →</button>
        </div>
      </div>
    </div>

  </div>

<script>
  // --- Days ---
  const daysEl = document.getElementById("days");
  document.getElementById("minus").onclick = () => {
    daysEl.textContent = Math.max(1, +daysEl.textContent - 1);
  };
  document.getElementById("plus").onclick = () => {
    daysEl.textContent = Math.min(30, +daysEl.textContent + 1);
  };

  // --- Group size ---
  const adultsEl = document.getElementById("adultsCount");
  const kidsEl = document.getElementById("kidsCount");

  document.getElementById("adultsMinus").onclick = () => {
    adultsEl.textContent = Math.max(1, +adultsEl.textContent - 1);
  };
  document.getElementById("adultsPlus").onclick = () => {
    adultsEl.textContent = Math.min(20, +adultsEl.textContent + 1);
  };

  document.getElementById("kidsMinus").onclick = () => {
    kidsEl.textContent = Math.max(0, +kidsEl.textContent - 1);
  };
  document.getElementById("kidsPlus").onclick = () => {
    kidsEl.textContent = Math.min(20, +kidsEl.textContent + 1);
  };

  // --- Chip toggles (Stage 2 only) ---
  document.getElementById("chips").addEventListener("click", (e) => {
    const chip = e.target.closest(".chip");
    if (!chip) return;
    chip.classList.toggle("on");
  });

  // --- Stage control ---
  const shell = document.getElementById("shell");
  const stage2Panel = document.getElementById("stage2Panel");
  const stage3Panel = document.getElementById("stage3Panel");
  const startEl = document.getElementById("start");
  const destEl  = document.getElementById("dest");

  // Always start Stage 1
  shell.classList.remove("stage2");
  shell.classList.remove("stage3");
  stage2Panel.setAttribute("aria-hidden", "true");
  stage3Panel.setAttribute("aria-hidden", "true");

  // Stage 1 -> Stage 2
  document.getElementById("continueBtn").addEventListener("click", () => {
    const start = startEl.value.trim();
    const dest = destEl.value.trim();

    if (!start || !dest) {
      alert("Please enter both Start and Destination.");
      if (!start) startEl.focus();
      else destEl.focus();
      return;
    }

    shell.classList.add("stage2");
    stage2Panel.setAttribute("aria-hidden", "false");
    window.scrollTo({ top: 0, behavior: "smooth" });
  });

  // Stage 2 -> Stage 3 (populate Stage 3 summary like the image)
  document.getElementById("nextBtn").addEventListener("click", () => {
    // group pill
    const groupPill = document.getElementById("groupPill");
    groupPill.textContent = `Adults ${+adultsEl.textContent}, Kids ${+kidsEl.textContent}`;

    // selected preference chips summary
    const selectedPrefsEl = document.getElementById("selectedPrefs");
    selectedPrefsEl.innerHTML = "";

    const selected = Array.from(document.querySelectorAll("#chips .chip.on"));
    selected.forEach(chip => {
      const clone = chip.cloneNode(true);
      clone.classList.add("on"); // keep selected look
      selectedPrefsEl.appendChild(clone);
    });

    shell.classList.remove("stage2");
    shell.classList.add("stage3");
    stage2Panel.setAttribute("aria-hidden", "true");
    stage3Panel.setAttribute("aria-hidden", "false");
    window.scrollTo({ top: 0, behavior: "smooth" });
  });

  // Segmented switch behavior (Stage 3 constraints)
  document.addEventListener("click", (e) => {
    const btn = e.target.closest(".seg button");
    if (!btn) return;

    const seg = btn.parentElement;
    seg.querySelectorAll("button").forEach(b => b.classList.remove("on"));
    btn.classList.add("on");
  });

  // Build itinerary placeholder (collect everything)
  document.getElementById("buildBtn").addEventListener("click", () => {
    const preferences = Array.from(document.querySelectorAll(".chip.on")).map(c => c.dataset.key);

    const constraints = {};
    document.querySelectorAll(".seg").forEach(seg => {
      const key = seg.dataset.key;
      const active = seg.querySelector("button.on");
      constraints[key] = active ? active.dataset.val : null;
    });

    const payload = {
      start: startEl.value.trim(),
      destination: destEl.value.trim(),
      mode: document.getElementById("mode").value,
      days: +daysEl.textContent,
      group: { adults: +adultsEl.textContent, kids: +kidsEl.textContent },
      preferences,
      constraints
    };

    alert("Collected:\n" + JSON.stringify(payload, null, 2));
  });
</script>

</body>
</html>
